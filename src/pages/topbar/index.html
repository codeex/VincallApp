<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Vin Call</title>
    <script type="text/javascript" src="./js/APPClient.js"></script>
    <link rel="stylesheet" type="text/css" href="./css/style.css?v=1.0.1" />
  </head>
  <body>
    <script type="text/javascript">
      var client = APPClient.init();
      var isOpen = false;
      client.on("agentconsole.topBar.buttons.click", function (topBar) {
        if (!isOpen) {
          client
            .do("agentconsole.popper.open", {
              widgetId: "vincall-button",
              url: "https://wwwtest.vincall.net/oauth/login?isembedded=1",
              width: 400,
              height: 560,
            })
            .then(function ({ data }) {
              const popupId = data.popupId;
              isOpen = true;
            });
        } else {
          client.do("agentconsole.popper.close").then(function () {
            isOpen = false;
          });
        }
      });
    </script>
  </body>
</html>
